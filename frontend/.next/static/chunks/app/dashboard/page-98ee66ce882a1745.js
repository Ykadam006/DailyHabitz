(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{5731:(e,t,a)=>{"use strict";a.d(t,{WV:()=>r,c$:()=>l,uc:()=>i,wK:()=>o,z5:()=>s});let n="https://dailyhabitz.onrender.com";async function s(e){let t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create habit");return t.json()}async function l(e){let t=await fetch("".concat(n,"?userId=").concat(e));if(!t.ok)throw Error("Failed to fetch habits");return t.json()}let r=async e=>{let t=await fetch("http://localhost:5050/habits/".concat(e,"/done"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!t.ok){let e=await t.json();throw Error((null==e?void 0:e.error)||"Failed to mark habit as done")}return t.json()};async function i(e){if(!(await fetch("".concat(n,"/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete habit")}async function o(e,t){let a=await fetch("".concat(n,"/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to update habit");return a.json()}},5796:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var n=a(5155),s=a(2115),l=a(5731);function r(e){let{userId:t}=e,[a,r]=(0,s.useState)(""),[i,o]=(0,s.useState)("daily"),[c,d]=(0,s.useState)(""),u=async e=>{e.preventDefault();try{await (0,l.z5)({title:a,frequency:i,notes:c,userId:t}),r(""),o("daily"),d(""),window.location.reload()}catch(e){alert("❌ Failed to create habit")}};return(0,n.jsxs)("form",{onSubmit:u,className:"bg-gradient-to-br from-[#edf6f9] via-[#83c5be] to-[#006d77] text-gray-800 p-6 rounded-2xl shadow-lg max-w-xl mx-auto",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4 text-[#243E36]",children:"\uD83C\uDF31 Create a New Habit"}),(0,n.jsx)("input",{type:"text",placeholder:"Enter habit title",className:"w-full px-4 py-2 mb-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#006d77]",value:a,onChange:e=>r(e.target.value),required:!0}),(0,n.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 mb-3 rounded-lg border bg-white focus:outline-none focus:ring-2 focus:ring-[#006d77]",children:[(0,n.jsx)("option",{value:"daily",children:"\uD83C\uDF1E Daily"}),(0,n.jsx)("option",{value:"weekly",children:"\uD83D\uDCC5 Weekly"})]}),(0,n.jsx)("textarea",{placeholder:"Add notes (optional)",className:"w-full px-4 py-2 mb-4 rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#006d77]",value:c,onChange:e=>d(e.target.value)}),(0,n.jsx)("button",{type:"submit",className:"w-full py-2 bg-[#243E36] hover:bg-[#1b2c28] text-white font-semibold rounded-lg transition",children:"➕ Add Habit"})]})}},7661:(e,t,a)=>{"use strict";a.d(t,{default:()=>h});var n=a(5155),s=a(2115),l=a(5731);function r(e){let{habit:t,onClose:a,onSave:r}=e,[i,o]=(0,s.useState)(t.title),[c,d]=(0,s.useState)(t.frequency),[u,h]=(0,s.useState)(t.notes||""),[x,m]=(0,s.useState)(!1),b=async e=>{e.preventDefault(),m(!0);try{await (0,l.wK)(t._id,{title:i,frequency:c,notes:u}),r(),a()}catch(e){alert("❌ Failed to update habit.")}finally{m(!1)}};return(0,n.jsxs)("form",{onSubmit:b,className:"bg-white p-4 rounded-lg shadow-md border border-[#d1e8e2] mt-2 space-y-3",children:[(0,n.jsx)("h3",{className:"text-xl font-semibold text-[#243E36]",children:"✏️ Edit Habit"}),(0,n.jsx)("input",{className:"w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#006d77]",value:i,onChange:e=>o(e.target.value),required:!0,placeholder:"Habit title"}),(0,n.jsxs)("select",{className:"w-full px-4 py-2 rounded-lg border bg-white focus:outline-none focus:ring-2 focus:ring-[#006d77]",value:c,onChange:e=>d(e.target.value),children:[(0,n.jsx)("option",{value:"daily",children:"\uD83C\uDF1E Daily"}),(0,n.jsx)("option",{value:"weekly",children:"\uD83D\uDCC5 Weekly"})]}),(0,n.jsx)("textarea",{className:"w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#006d77]",value:u,onChange:e=>h(e.target.value),placeholder:"Optional notes..."}),(0,n.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,n.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"❌ Cancel"}),(0,n.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#243E36] text-white rounded-lg hover:bg-[#1b2c28] transition",children:x?"Saving...":"\uD83D\uDCBE Save"})]})]})}var i=a(4288),o=a(2132),c=a(3898),d=a(6694);function u(e){let{completedDates:t}=e,a=(0,i.R)(),s=Array.from({length:30},(e,t)=>(0,o.e)(a,30-t-1));return(0,n.jsxs)("div",{className:"mt-2",children:[(0,n.jsx)("div",{className:"grid grid-cols-7 text-xs font-medium text-center text-gray-600 mb-1",children:["S","M","T","W","T","F","S"].map((e,t)=>(0,n.jsx)("div",{children:e},t))}),(0,n.jsx)("div",{className:"grid grid-cols-7 gap-1 text-[10px] text-center",children:s.map((e,a)=>{let s=t.some(t=>(0,c.r)(new Date(t),e));return(0,n.jsx)("div",{title:(0,d.GP)(e,"PP"),className:"flex flex-col items-center justify-center rounded-sm h-10 ".concat(s?"bg-green-600 text-white":"bg-gray-300"),children:(0,n.jsx)("span",{className:"font-semibold",children:(0,d.GP)(e,"d")})},a)})})]})}function h(e){let{userId:t}=e,[a,i]=(0,s.useState)([]),[o,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),x=async()=>{try{let e=await (0,l.c$)(t);i(e)}catch(e){console.error("Error fetching habits")}};(0,s.useEffect)(()=>{x()},[]);let m=async e=>{c(e);try{await (0,l.WV)(e),await x()}catch(e){alert(e.message)}c(null)},b=async e=>{confirm("❗ Delete this habit?")&&(c(e),await (0,l.uc)(e),await x(),c(null))};return a.length?(0,n.jsx)("div",{className:"space-y-6",children:a.map(e=>(0,n.jsx)("div",{className:"border border-[#d1e8e2] bg-white p-4 rounded-xl shadow-sm transition hover:shadow-md",children:d===e._id?(0,n.jsx)(r,{habit:e,onClose:()=>h(null),onSave:x}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-[#243E36] mb-1",children:e.title}),(0,n.jsxs)("p",{className:"text-sm text-[#7CA982] mb-1",children:["\uD83D\uDD52 ",e.frequency]}),e.notes&&(0,n.jsx)("p",{className:"text-sm text-gray-600 italic mb-1",children:e.notes}),(0,n.jsxs)("p",{className:"text-sm mt-1 text-[#006d77]",children:["\uD83D\uDD01 Streak: ",(0,n.jsx)("strong",{children:e.currentStreak||0})," | ⚡ XP:"," ",(0,n.jsx)("strong",{children:e.xp||0})]})]}),(0,n.jsxs)("div",{className:"space-x-2 mt-1",children:[(0,n.jsx)("button",{onClick:()=>m(e._id),disabled:o===e._id,className:"text-green-600 hover:text-green-700 text-xl",title:"Mark Done",children:"✅"}),(0,n.jsx)("button",{onClick:()=>h(e._id),className:"text-blue-500 hover:text-blue-600 text-xl",title:"Edit",children:"✏️"}),(0,n.jsx)("button",{onClick:()=>b(e._id),disabled:o===e._id,className:"text-red-500 hover:text-red-600 text-xl",title:"Delete",children:"\uD83D\uDDD1️"})]})]}),Array.isArray(e.completedDates)&&e.completedDates.length>0&&(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(u,{completedDates:e.completedDates})})]})},e._id))}):(0,n.jsx)("p",{className:"mt-6 text-center text-gray-500",children:"No habits yet. Start by adding one!"})}},9305:(e,t,a)=>{Promise.resolve().then(a.bind(a,5796)),Promise.resolve().then(a.bind(a,7661))}},e=>{var t=t=>e(e.s=t);e.O(0,[711,441,684,358],()=>t(9305)),_N_E=e.O()}]);